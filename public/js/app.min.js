"use strict";function startTimer(){setInterval(loadQuestions,1e4)}function loadQuestions(){console.log("lade Fragen"),loadJSONQuestions(),loadJavaScriptQuestions(),loadHTMLQuestions()}function getNearestLocationFromStorage(a){var b=new OpenLayers.Projection("EPSG:4326"),c=new OpenLayers.Projection("EPSG:900913"),d=new OpenLayers.LonLat(a.coords.longitude,a.coords.latitude).transform(b,c),e=localStorage.locations;if(null!=e){var f=JSON.parse(e),g=999999999;f.forEach(function(a){var b=Math.abs(d.lon-a.position.lon),c=Math.abs(d.lat-a.position.lat),e=b+c;g>e&&(g=e,stackexForumParam=a.siteParam,document.getElementById("currentForum").innerHTML=a.siteName)})}}function loadSearchedQuestions(){var a=document.getElementById("searchParam").value,b=localStorage.locations;if(null!=b){var d=(JSON.parse(b),new XMLHttpRequest);d.open("GET","https://api.stackexchange.com/2.2/search/advanced?pagesize=10&order=desc&sort=activity&answers=1&title="+a+"&site="+stackexForumParam+"&key=bF8kysNL8Z2W7K5llHJgGg((",!0),d.onreadystatechange=function(){if(4==d.readyState&&d.status>=200&&d.status<300){for(var a=[],b=JSON.parse(d.responseText).items,c=0;10>c;c++)a.push(new Question(b[c].question_id,b[c].title,b[c].link,stackexForumParam));document.getElementById("QuestionsFound").innerHTML="",a.forEach(function(a){document.getElementById("QuestionsFound").innerHTML+=a.toString()})}},d.send()}}function loadJSONQuestions(){var a=new XMLHttpRequest;a.open("GET","https://api.stackexchange.com/2.2/search/advanced?pagesize=5&order=desc&sort=activity&answers=1&tagged=json&site=stackoverflow&key=bF8kysNL8Z2W7K5llHJgGg((",!0),a.onreadystatechange=function(){if(4==a.readyState&&a.status>=200&&a.status<300){for(var b=[],c=JSON.parse(a.responseText).items,d=0;5>d;d++)b.push(new Question(c[d].question_id,c[d].title,c[d].link,"stackoverflow"));document.getElementById("resentJSONquestions").innerHTML="",b.forEach(function(a){document.getElementById("resentJSONquestions").innerHTML+=a.toString()})}},a.send()}function loadJavaScriptQuestions(){var a=new XMLHttpRequest;a.open("GET","https://api.stackexchange.com/2.2/search/advanced?pagesize=5&order=desc&sort=activity&answers=1&tagged=javascript&site=stackoverflow&key=bF8kysNL8Z2W7K5llHJgGg((",!0),a.onreadystatechange=function(){if(4==a.readyState&&a.status>=200&&a.status<300){for(var b=[],c=JSON.parse(a.responseText).items,d=0;5>d;d++)b.push(new Question(c[d].question_id,c[d].title,c[d].link,"stackoverflow"));document.getElementById("resentJavaScriptQuestions").innerHTML="",b.forEach(function(a){document.getElementById("resentJavaScriptQuestions").innerHTML+=a.toString()})}},a.send()}function loadHTMLQuestions(){var a=new XMLHttpRequest;a.open("GET","https://api.stackexchange.com/2.2/search/advanced?pagesize=5&order=desc&sort=activity&answers=1&tagged=html5&site=stackoverflow&key=bF8kysNL8Z2W7K5llHJgGg((",!0),a.onreadystatechange=function(){if(4==a.readyState&&a.status>=200&&a.status<300){for(var b=[],c=JSON.parse(a.responseText).items,d=0;5>d;d++)b.push(new Question(c[d].question_id,c[d].title,c[d].link,"stackoverflow"));document.getElementById("resentHTMLquestions").innerHTML="",b.forEach(function(a){document.getElementById("resentHTMLquestions").innerHTML+=a.toString()})}},a.send()}function Question(a,b,c,d){this.link=c,this.title=b,this.id=a,this.stackexParam=d}window.onload=function(){navigator.geolocation.getCurrentPosition(getNearestLocationFromStorage),loadQuestions(),document.getElementById("searchStackExchange").addEventListener("click",loadSearchedQuestions),startTimer()};var stackexForumParam="stackoverflow";Question.prototype.toString=function(){return this.title+':   <a href="html/answer.html?id='+this.id+"&site="+this.stackexParam+'" target="_self">Details</a><br />'};