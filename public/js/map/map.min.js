"use strict";!function(){function b(){a=new OpenLayers.Map("map"),c()}function c(){navigator.geolocation.getCurrentPosition(d)}function d(b){var c=new OpenLayers.Layer.OSM;a.addLayer(c);var d=new OpenLayers.Projection("EPSG:4326"),h=new OpenLayers.Projection("EPSG:900913"),i=new OpenLayers.LonLat(b.coords.longitude,b.coords.latitude).transform(d,h),j=14;f(i),a.setCenter(i,j),g({locationName:"You are here",position:i}),e()}function e(){var a=localStorage.locations;if(null!=a){var b=JSON.parse(a);b.forEach(function(a){f(a.position),g(a)})}}function f(b){var c=new OpenLayers.Layer.Markers("Markers");a.addLayer(c),c.addMarker(new OpenLayers.Marker(b))}function g(b){console.log("Add Popup: "+b.locationName);var c=new OpenLayers.Popup.FramedCloud("Popup",{lon:b.position.lon,lat:b.position.lat},null,b.locationName,null,!0);a.addPopup(c)}console.log("initialized map.js");var a;b()}();
